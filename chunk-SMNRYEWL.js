import{a as b}from"./chunk-2TTMMZPA.js";import{a as w}from"./chunk-2O4QYMPI.js";import{h as C}from"./chunk-BPO3UDND.js";import"./chunk-IGDONR4E.js";import{Bb as y,Jb as S,Mb as I,N as r,O as h,P as d,Z as u,aa as f,ab as p,eb as v,ob as _,pb as g,u as m}from"./chunk-XKQUAFE5.js";var x={formId:"schoolcertificate",title:"Schoolcertificate",components:[{name:"Text",key:"title",focused:!0,fields:[{name:"Placeholder",value:"fill certificates title"},{name:"Label",value:"Title"}]},{name:"Date",key:"received",fields:[{name:"Placeholder",value:"set receiving date"},{name:"Label",value:"Received"}]},{name:"Number",key:"grade",fields:[{name:"Placeholder",value:"set certificates grade"},{name:"Label",value:"Grade"}]},{name:"Date",key:"expired",fields:[{name:"Placeholder",value:"set expiration date"},{name:"Label",value:"Expired"}]},{name:"Select",key:"status",fields:[{name:"Items",value:["Pending","Received","Expired"]},{name:"Placeholder",value:"choose certificates status"},{name:"Label",value:"Status"},{name:"Multiple",value:!1}]}]};var l=(()=>{let t=class t{get hasAccess(){return this._us.role("admin")||this._us.role("schoolowner")||this._us.role("schoolteacher")}get rows(){return this.moduleId?this._schoolcertificateService.schoolcertificatesByModuleId[this.moduleId]:this._schoolcertificateService.schoolcertificates}constructor(o,i,e,c,n,j,T){this._translate=o,this._schoolcertificateService=i,this._alert=e,this._form=c,this._core=n,this._router=j,this._us=T,this.columns=["title","received","grade","expired","status"],this.moduleType=this._router.url.includes("/certificates/")?this._router.url.split("/")[this._router.url.split("/").length-2]:"",this.moduleId=this._router.url.includes("/certificates/")?this._router.url.split("/")[this._router.url.split("/").length-1]:"",this.form=this._form.getForm("schoolcertificate",x),this.config={update:a=>{this._form.modal(this.form,[],a).then(k=>{this._core.copy(k,a),this._schoolcertificateService.update(a)})},delete:a=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this certificate?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._schoolcertificateService.delete(a)}}]})},buttons:[this.hasAccess?{icon:"cloud_download",click:a=>{this._form.modalUnique("schoolcertificate","url",a)}}:null]}}_bulkManagement(o=!0){return()=>{this._form.modalDocs(o?[]:this.rows).then(i=>{if(o)for(let e of i)this._preCreate(e),this._schoolcertificateService.create(e);else{for(let e of this.rows)i.find(c=>c._id===e._id)||this._schoolcertificateService.delete(e);for(let e of i){let c=this.rows.find(n=>n._id===e._id);c?(this._core.copy(e,c),this._schoolcertificateService.update(c)):(this._preCreate(e),this._schoolcertificateService.create(e))}}})}}_preCreate(o){delete o.__created,this.moduleType&&(o.moduleType=this.moduleType),this.moduleId&&(o.moduleId=this.moduleId)}};t.\u0275fac=function(i){return new(i||t)(r(y),r(b),r(_),r(S),r(g),r(p),r(w))},t.\u0275cmp=h({type:t,selectors:[["ng-component"]],standalone:!1,decls:1,vars:3,consts:[["title","Certificates",3,"columns","config","rows"]],template:function(i,e){i&1&&f(0,"wtable",0),i&2&&u("columns",e.columns)("config",e.config)("rows",e.rows)},dependencies:[I],encapsulation:2});let s=t;return s})();var F=[{path:"",component:l},{path:"course/:schoolcertificate",component:l},{path:"test/:schoolcertificate",component:l},{path:"school/:school",component:l}],H=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=d({type:t}),t.\u0275inj=m({imports:[v.forChild(F),C]});let s=t;return s})();export{H as CertificatesModule};

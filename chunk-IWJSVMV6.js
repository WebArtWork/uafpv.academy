import{a as S}from"./chunk-2O4QYMPI.js";import{h as C}from"./chunk-BPO3UDND.js";import"./chunk-IGDONR4E.js";import{Bb as g,Jb as k,Mb as w,N as n,O as u,P as d,Z as f,aa as p,eb as _,ob as v,pb as y,t as h,u as m,vb as b}from"./chunk-XKQUAFE5.js";var x={formId:"school",title:"School",components:[{name:"Text",key:"name",focused:!0,fields:[{name:"Placeholder",value:"fill schools title"},{name:"Label",value:"Title"}]},{name:"Text",key:"description",fields:[{name:"Placeholder",value:"fill schools description"},{name:"Label",value:"Description"}]},{name:"Text",key:"city",fields:[{name:"Placeholder",value:"fill schools city"},{name:"Label",value:"City"}]},{name:"Text",key:"address",fields:[{name:"Placeholder",value:"fill schools address"},{name:"Label",value:"Address"}]},{name:"Text",key:"phone",fields:[{name:"Placeholder",value:"fill schools phone"},{name:"Label",value:"Phone"}]},{name:"Text",key:"email",fields:[{name:"Placeholder",value:"fill schools email"},{name:"Label",value:"Email"}]},{name:"Text",key:"year",fields:[{name:"Placeholder",value:"fill schools year"},{name:"Label",value:"Year"}]},{name:"Text",key:"signature",fields:[{name:"Placeholder",value:"fill schools signature"},{name:"Label",value:"Signature"}]},{name:"Text",key:"curency",fields:[{name:"Placeholder",value:"fill schools curency"},{name:"Label",value:"Curency"}]},{name:"Select",key:"type",fields:[{name:"Items",value:["Offline","Online"]},{name:"Placeholder",value:"choose schools type"},{name:"Label",value:"Type"},{name:"Multiple",value:!1}]}]};var I=(()=>{let e=class e extends b{constructor(){super({name:"school"}),this.schools=this.getDocs(),this.get()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();var F=(()=>{let e=class e{get rows(){return this._schoolService.schools}constructor(l,i,t,r,a,P){this._translate=l,this._schoolService=i,this._alert=t,this._form=r,this._core=a,this._us=P,this.columns=["name","city"],this.form=this._form.getForm("school",x),this.config={create:this._us.role("admin")||this._us.role("schoolowner")?()=>{this._form.modal(this.form,{label:"Create",click:(o,c)=>{this._preCreate(o),this._schoolService.create(o),c()}})}:null,update:this._us.role("admin")||this._us.role("schoolowner")?o=>{this._form.modal(this.form,[],o).then(c=>{this._core.copy(c,o),this._schoolService.update(o)})}:null,delete:this._us.role("admin")||this._us.role("schoolowner")?o=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this school?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._schoolService.delete(o)}}]})}:null,buttons:[{icon:"cloud_download",click:o=>{this._form.modalUnique("school","url",o)}},{icon:"auto_stories",hrefFunc:o=>this._roleUrl()+"levels/"+o._id},{icon:"menu_book",hrefFunc:o=>this._roleUrl()+"courses/"+o._id},{icon:"assignment",hrefFunc:o=>this._roleUrl()+"tests/school/"+o._id},{icon:"card_membership",hrefFunc:o=>this._roleUrl()+"certificates/school/"+o._id}],headerButtons:[this._us.role("admin")||this._us.role("schoolowner")?{icon:"playlist_add",click:this._bulkManagement(),class:"playlist"}:null,this._us.role("admin")||this._us.role("schoolowner")?{icon:"edit_note",click:this._bulkManagement(!1),class:"edit"}:null]}}_bulkManagement(l=!0){return()=>{this._form.modalDocs(l?[]:this.rows).then(i=>{if(l)for(let t of i)this._preCreate(t),this._schoolService.create(t);else{for(let t of this.rows)i.find(r=>r._id===t._id)||this._schoolService.delete(t);for(let t of i){let r=this.rows.find(a=>a._id===t._id);r?(this._core.copy(t,r),this._schoolService.update(r)):(this._preCreate(t),this._schoolService.create(t))}}})}}_preCreate(l){delete l.__created}_roleUrl(){return this._us.role("admin")?"/admin/":this._us.role("schoolowner")?"/owner/":this._us.role("schoolteacher")?"/teacher/":"/"}};e.\u0275fac=function(i){return new(i||e)(n(g),n(I),n(v),n(k),n(y),n(S))},e.\u0275cmp=u({type:e,selectors:[["ng-component"]],standalone:!1,decls:1,vars:3,consts:[["title","Schools",3,"columns","config","rows"]],template:function(i,t){i&1&&p(0,"wtable",0),i&2&&f("columns",t.columns)("config",t.config)("rows",t.rows)},dependencies:[w],encapsulation:2});let s=e;return s})();var L=[{path:"",component:F}],G=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=d({type:e}),e.\u0275inj=m({imports:[_.forChild(L),C]});let s=e;return s})();export{G as SchoolsModule};

import{a as te}from"./chunk-PVDPL3BM.js";import{a as ie}from"./chunk-2TNFNGTP.js";import{a as ne}from"./chunk-2TTMMZPA.js";import{a as ee}from"./chunk-2O4QYMPI.js";import{b as B,g as Y,h as Z}from"./chunk-BPO3UDND.js";import{a as X}from"./chunk-IGDONR4E.js";import{$ as r,Ab as K,Ba as y,Bb as Q,Ca as V,Cb as b,Da as P,Fb as W,H as k,I as q,K as c,N as d,O as w,Oa as F,P as H,Pa as I,T as h,U as E,Z as u,_ as o,_a as N,aa as x,ab as R,bb as U,ea as g,eb as G,fa as m,ga as p,lb as S,ob as J,pa as L,pb as D,qa as a,ra as _,sa as T,u as $,ub as O,y as f,z as v}from"./chunk-XKQUAFE5.js";function ge(e,s){if(e&1&&(o(0,"div",9)(1,"div",10)(2,"div",11)(3,"h3",12),a(4),y(5,"split"),r(),o(6,"div",13),a(7),y(8,"split"),r()()()()),e&2){let t=s.$implicit;c(4),_(V(5,2,t)),c(3),_(P(8,4,t,1))}}function he(e,s){if(e&1&&(o(0,"div")(1,"div",3)(2,"div",4)(3,"span",5),a(4,"school"),r()(),o(5,"h2",6),a(6,"Course.\u0429\u043E \u0432\u0438 \u0434\u0456\u0437\u043D\u0430\u0454\u0442\u0435\u0441\u044C"),r()(),o(7,"div",7),h(8,ge,9,7,"div",8),r()()),e&2){let t=p();c(8),u("ngForOf",t.course.learning)}}function xe(e,s){if(e&1&&(o(0,"div",16)(1,"div",17)(2,"span",5),a(3,"check_circle"),r()(),o(4,"div",18)(5,"h3",19),a(6),y(7,"split"),r(),o(8,"div",20),a(9),y(10,"split"),r()()()),e&2){let t=s.$implicit;c(6),_(V(7,2,t)),c(3),_(P(10,4,t,1))}}function Ce(e,s){if(e&1&&(o(0,"div")(1,"div",3)(2,"div",4)(3,"span",5),a(4,"list"),r()(),o(5,"h2",6),a(6,"Course.\u0426\u0435\u0439 \u043A\u0443\u0440\u0441 \u0432\u043A\u043B\u044E\u0447\u0430\u0454 \u0432 \u0441\u0435\u0431\u0435"),r()(),o(7,"div",14),h(8,xe,11,7,"div",15),r()()),e&2){let t=p();c(8),u("ngForOf",t.course.included)}}function we(e,s){if(e&1){let t=g();o(0,"div",23),m("click",function(){let n=f(t).$implicit,i=p(2);return v(i.selectLesson.emit(n._id))}),o(1,"div",24),x(2,"span"),r(),o(3,"div",25)(4,"div",26),a(5),r(),o(6,"div",27),a(7),r()()()}if(e&2){let t=s.$implicit;c(5),_(t.name),c(2),_(t.shortDescription)}}function be(e,s){if(e&1&&(o(0,"div")(1,"div",21)(2,"div",4)(3,"span",5),a(4,"assignment"),r()(),o(5,"h2",6),a(6,"Course.\u0417\u043C\u0456\u0441\u0442 \u043A\u0443\u0440\u0441\u0443"),r()(),o(7,"div"),h(8,we,8,2,"div",22),r()()),e&2){let t=p();c(8),u("ngForOf",t.lessons)}}function ye(e,s){if(e&1&&(o(0,"div"),a(1),r()),e&2){let t=p();c(),T(" \u041F\u0435\u0440\u0435\u0434 \u043F\u0440\u043E\u0445\u043E\u0434\u0436\u0435\u043D\u043D\u044F\u043C \u0446\u044C\u043E\u0433\u043E \u043A\u0443\u0440\u0441\u0443 \u0440\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u0454\u0442\u044C\u0441\u044F \u0441\u043F\u043E\u0447\u0430\u0442\u043A\u0443 \u043F\u0440\u043E\u0439\u0442\u0438 ",t.scs.doc(t.course.suggestedCourse).name,", \u0449\u043E\u0431 \u043A\u0440\u0430\u0449\u0435 \u043E\u0437\u043D\u0430\u0439\u043E\u043C\u0438\u0442\u0438\u0441\u044F \u0437 \u043C\u0430\u0442\u0435\u0440\u0456\u0430\u043B\u043E\u043C. ")}}function Ee(e,s){if(e&1&&(o(0,"div"),a(1),r()),e&2){let t=p();c(),T(" \u0414\u043B\u044F \u043F\u0440\u043E\u0445\u043E\u0434\u0436\u0435\u043D\u043D\u044F \u0446\u044C\u043E\u0433\u043E \u043A\u0443\u0440\u0441\u0443 \u043D\u0435\u043E\u0431\u0445\u0456\u0434\u043D\u043E \u0441\u043F\u043E\u0447\u0430\u0442\u043A\u0443 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 ",t.scs.doc(t.course.requiredCourse).name,", \u043E\u0441\u043A\u0456\u043B\u044C\u043A\u0438 \u0432\u0456\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u044C \u0432\u0430\u0436\u043B\u0438\u0432\u0456 \u0431\u0430\u0437\u043E\u0432\u0456 \u0437\u043D\u0430\u043D\u043D\u044F. ")}}function Ie(e,s){if(e&1&&(o(0,"div",29)(1,"div",30)(2,"span",5),a(3,"info"),r()(),o(4,"div",11)(5,"h3",12),a(6),y(7,"split"),r(),o(8,"div",13),a(9),y(10,"split"),r()()()),e&2){let t=s.$implicit;c(6),_(V(7,2,t)),c(3),_(P(10,4,t,1))}}function Se(e,s){if(e&1&&(o(0,"div")(1,"div",3)(2,"div",4)(3,"span",5),a(4,"assignment_late"),r()(),o(5,"h2",6),a(6,"Course.\u0412\u0438\u043C\u043E\u0433\u0438 \u0434\u043E \u0446\u044C\u043E\u0433\u043E \u043A\u0443\u0440\u0441\u0443"),r()(),o(7,"div"),h(8,Ie,11,7,"div",28),r()()),e&2){let t=p();c(8),u("ngForOf",t.course.requirements)}}var oe=(()=>{let s=class s{constructor(l){this.scs=l,this.lessons=[],this.selectLesson=new E}};s.\u0275fac=function(n){return new(n||s)(d(B))},s.\u0275cmp=w({type:s,selectors:[["app-view"]],inputs:{course:"course",lessons:"lessons"},outputs:{selectLesson:"selectLesson"},standalone:!1,decls:8,vars:7,consts:[[1,"documents-main-row"],[4,"ngIf"],[3,"innerHTML"],[1,"learn-title"],[1,"learn-title__img"],[1,"material-icons"],["translate","",1,"learn-title__text"],[1,"learn-list"],["class","learn__wrap",4,"ngFor","ngForOf"],[1,"learn__wrap"],[1,"learn__item"],[1,"learn-block__text"],[1,"learn__title"],[1,"learn__description"],[1,"include-list"],["class","include__item",4,"ngFor","ngForOf"],[1,"include__item"],[1,"include__img"],[1,"include__text"],[1,"include__title"],[1,"include__description"],[1,"learn-title","content-main-title"],["class","content-list",3,"click",4,"ngFor","ngForOf"],[1,"content-list",3,"click"],[1,"content__img"],[1,"content-text"],[1,"content-text__title"],[1,"content-text__description"],["class","learn-block requirements-block",4,"ngFor","ngForOf"],[1,"learn-block","requirements-block"],[1,"learn-block__img"]],template:function(n,i){n&1&&(o(0,"div",0),h(1,he,9,1,"div",1)(2,Ce,9,1,"div",1)(3,be,9,1,"div",1)(4,ye,2,1,"div",1)(5,Ee,2,1,"div",1)(6,Se,9,1,"div",1),x(7,"div",2),r()),n&2&&(c(),u("ngIf",i.course.learning==null?null:i.course.learning.length),c(),u("ngIf",i.course.included==null?null:i.course.included.length),c(),u("ngIf",i.course.included==null?null:i.course.included.length),c(),u("ngIf",i.course.suggestedCourse),c(),u("ngIf",i.course.requiredCourse),c(),u("ngIf",i.course.requirements==null?null:i.course.requirements.length),c(),u("innerHTML",i.course.description,k))},dependencies:[b,F,I,Y],styles:[".learn-title[_ngcontent-%COMP%]{font-size:22px;text-transform:uppercase;display:flex;align-items:center}.learn-title__img[_ngcontent-%COMP%]{display:flex;margin-right:15px}.learn-title__img[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:46px;color:var(--brown)}.learn-title__text[_ngcontent-%COMP%]{flex:1 0}.learn-list[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap}.learn__wrap[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%;padding:0 10px;display:flex;margin-bottom:20px}.learn__item[_ngcontent-%COMP%]{border-radius:6px;background:linear-gradient(151deg,#3c3333,#1e1e1e);border:1px solid var(--brown);padding:12px}.learn-block[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px}.learn-block__img[_ngcontent-%COMP%]{display:flex;flex:0 0 45px;color:var(--brown);margin-right:10px}.learn-block__img[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:45px}.learn-block__text[_ngcontent-%COMP%]{flex:1 0}.learn__main-title[_ngcontent-%COMP%]{font-size:27px;font-weight:900;text-transform:uppercase}.learn__title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#dfd8c6;margin:0 0 5px;line-height:1.1}.learn__lesson-title[_ngcontent-%COMP%]{font-size:22px;font-weight:600;margin:0}.include-list[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap}.include__item[_ngcontent-%COMP%]{flex:0 0 33.3333%;max-width:33.3333%;padding:0 10px;margin:0 0 20px;display:flex;flex-flow:column wrap}.include__img[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;justify-content:center;align-items:center;border-radius:6px;background:linear-gradient(151deg,#3c3333,#1e1e1e);border:1px solid var(--brown)}.include__img[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--brown)}.include__title[_ngcontent-%COMP%]{color:#dfd8c6;font-size:18px;margin:15px 0 5px;line-height:1.1}.content-list[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;margin-bottom:20px}.content-list[_ngcontent-%COMP%]:last-child{margin-bottom:0}.content-text[_ngcontent-%COMP%]{flex:1 0;padding-left:10px}.content-text__title[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#dfd8c6;margin-bottom:5px;line-height:1.1}.content__img[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:4px;background:linear-gradient(151deg,#3c3333,#1e1e1e);border:1px solid var(--brown);display:flex;justify-content:center;align-items:center}.content__img[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;border-radius:2px;width:10px;height:10px;background:var(--brown)}.requirements-block[_ngcontent-%COMP%]{background:linear-gradient(151deg,#3c3333,#1e1e1e);border:1px solid var(--brown);border-radius:8px;padding:7px}@media screen and (max-width: 767px){.learn__main-title[_ngcontent-%COMP%]{font-size:24px;font-weight:800;margin:25px 0}.learn__lesson-title[_ngcontent-%COMP%]{font-size:22px}.learn-block[_ngcontent-%COMP%]{align-items:self-start}.learn__title[_ngcontent-%COMP%], .learn__lesson-title[_ngcontent-%COMP%]{font-size:20px;line-height:1;font-weight:600;margin:0;padding-bottom:10px}.learn-title[_ngcontent-%COMP%]{font-size:16px;line-height:1.1}.learn__wrap[_ngcontent-%COMP%], .include__item[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%;padding:0}}"]});let e=s;return e})();function Me(e,s){if(e&1){let t=g();o(0,"winput",10),m("wChange",function(n){f(t);let i=p().$implicit;return v(i.text=n+"")}),r()}}function ke(e,s){if(e&1){let t=g();o(0,"winput",11),m("wChange",function(n){f(t);let i=p().$implicit;return v(i.radio=n+"")}),r()}if(e&2){let t=p().$implicit;u("items",t.answers)}}function Te(e,s){if(e&1){let t=g();o(0,"winput",12),m("wChange",function(n){f(t);let i=p().$implicit,C=p(2);return v(C.setCheckboxes(i,n))}),r()}if(e&2){let t=p().$implicit;u("items",t.answers)}}function Le(e,s){if(e&1&&(o(0,"div")(1,"p"),a(2),r(),h(3,Me,1,0,"winput",7)(4,ke,1,1,"winput",8)(5,Te,1,1,"winput",9),r()),e&2){let t=s.$implicit;c(2),_(t.question),c(),u("ngIf",t.type==="Text"),c(),u("ngIf",t.type==="Radio"),c(),u("ngIf",t.type==="Checkbox")}}function Ve(e,s){if(e&1){let t=g();o(0,"div",0)(1,"div",1),a(2),r(),x(3,"div",2),h(4,Le,6,4,"div",4),o(5,"wbutton",5),m("click",function(){let n=f(t).$implicit,i=p();return v(i.answer(n))}),o(6,"span",6),a(7,"Common.Checkup"),r()()()}if(e&2){let t=s.$implicit;c(2),_(t.name),c(),u("innerHTML",t.description,k),c(),u("ngForOf",t.questions)}}var ce=(()=>{let s=class s{constructor(l,n,i,C){this._translate=l,this._alert=n,this._http=i,this._core=C,this.tests=[],this.nextLesson=new E}setCheckboxes(l,n){l.checkboxes=l.checkboxes||[],l.checkboxes=n}answer(l){this._http.post("/api/school/test/answer",{certificate:this.certificate,test:l}).subscribe(n=>{n?(this._core.copy(n,this.certificate),this.nextLesson.emit()):this._alert.warning({text:this._translate.translate("The answer is incorrect")})})}};s.\u0275fac=function(n){return new(n||s)(d(Q),d(J),d(O),d(D))},s.\u0275cmp=w({type:s,selectors:[["app-lesson"]],inputs:{lesson:"lesson",certificate:"certificate",tests:"tests"},outputs:{nextLesson:"nextLesson"},standalone:!1,decls:5,vars:3,consts:[[1,"documents-main-row"],[1,"documents__title"],[1,"documents__description",3,"innerHTML"],["class","documents-main-row",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"click"],["translate",""],["placeholder","answer the question",3,"wChange",4,"ngIf"],["type","radio",3,"items","wChange",4,"ngIf"],["type","checkbox",3,"items","wChange",4,"ngIf"],["placeholder","answer the question",3,"wChange"],["type","radio",3,"wChange","items"],["type","checkbox",3,"wChange","items"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"div",1),a(2),r(),x(3,"div",2),r(),h(4,Ve,8,3,"div",3)),n&2&&(c(2),_(i.lesson.name),c(),u("innerHTML",i.lesson.description,k),c(),u("ngForOf",i.tests))},dependencies:[b,F,I,S,W],encapsulation:2});let e=s;return e})();var ae=(()=>{let s=class s{constructor(l){this._http=l,this.paid=new E}buy(){this._http.post("/api/school/participate",{session:this.courseId,course:this.sessionId}).subscribe(l=>{this.paid.emit(l)})}};s.\u0275fac=function(n){return new(n||s)(d(O))},s.\u0275cmp=w({type:s,selectors:[["app-buy"]],inputs:{courseId:"courseId",sessionId:"sessionId"},outputs:{paid:"paid"},standalone:!1,decls:3,vars:0,consts:[[3,"click"],["translate",""]],template:function(n,i){n&1&&(o(0,"wbutton",0),m("click",function(){return i.buy()}),o(1,"span",1),a(2,"Common.Buy"),r()())},dependencies:[b,S],encapsulation:2});let e=s;return e})();function De(e,s){if(e&1){let t=g();o(0,"wselect",25),m("modelChange",function(n){f(t);let i=p();return v(i.setLesson(n))}),r()}if(e&2){let t=p();u("select",t.lesson._id)("items",t.lessons)}}function Be(e,s){if(e&1){let t=g();o(0,"wbutton",26),m("click",function(){f(t);let n=p();return v(n.show="lesson")}),o(1,"span",27),a(2,"Common.\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u0434\u043E \u043B\u0435\u043A\u0446\u0456\u0439"),r()()}}function je(e,s){if(e&1){let t=g();o(0,"wbutton",26),m("click",function(){f(t);let n=p();return v(n.buy())}),o(1,"span",27),a(2,"Common.\u041F\u0440\u0438\u0434\u0431\u0430\u0442\u0438"),r()()}}function qe(e,s){if(e&1){let t=g();o(0,"app-view",28),m("selectLesson",function(n){f(t);let i=p();return v(i.setLesson(n))}),r()}if(e&2){let t=p();u("lessons",t.allLessons)("course",t.course)}}function ze(e,s){if(e&1){let t=g();o(0,"app-lesson",29),m("nextLesson",function(){f(t);let n=p();return v(n.nextLesson())}),r()}if(e&2){let t=p();u("certificate",t.certificate)("lesson",t.lesson)("tests",t.tests)}}function Ae(e,s){if(e&1){let t=g();o(0,"app-buy",30),m("paid",function(n){f(t);let i=p();return i.show="lesson",v(i.certificate=n)}),r()}if(e&2){let t=p();u("sessionId",t.sessionId)("courseId",t.courseId)}}var A=(()=>{let s=class s{get allowedNextLesson(){return this.testsIds.every(l=>this.certificate.tests.includes(l))}constructor(l,n,i,C,ue,pe,de,me,_e){this.userService=l,this._ss=n,this._scs=i,this._sts=C,this._sls=ue,this._http=pe,this._core=de,this._router=me,this._route=_e,this.url=K.url,this.show="view",this.isMenuOpen=!1,this.allLessons=[],this.lessons=[],this.tests=[],this.testsIds=[],this._route.paramMap.subscribe(M=>{this.courseId=M.get("course_id")||"",this.course=this._scs.doc(this.courseId),this.sessionId=M.get("session_id")||""}),this._core.onComplete("schoolcertificate_loaded").then(()=>{let M=this._ss.schoolcertificates.find(fe=>fe.course===this.courseId);M&&(this.certificate=M)}),this._loadLessons()}nextLesson(){this.certificate.lessons.push(this.lesson._id),this._http.post("/api/school/certificate/lesson",{certificate:this.certificate,lesson:this.lesson}),this._addNextLesson(),this._loadTests()}setLesson(l){this.certificate&&(this.lesson=this.allLessons.filter(n=>n._id===l)[0],this.show="lesson")}back(){window.history.back()}buy(){this.userService.user.email?this.show="buy":this._router.navigateByUrl("/sign")}_loadLessons(){this._sls.get({query:"course="+this.courseId},{name:"public"}).subscribe(l=>{l=l.sort((n,i)=>n.order-i.order),this.allLessons.push(...l),this.certificate?.lessons?.length&&this.lessons.push(...this.allLessons.filter(n=>this.certificate.lessons.includes(n._id))),this._addNextLesson(),this._loadTests()})}_addNextLesson(){if(this.certificate?.lessons?.length!==this.allLessons.length){let l=this.lessons.map(n=>n._id);this.lesson=this.allLessons.filter(n=>!l.includes(n._id))[0],this.lessons.push(this.lesson)}}_loadTests(){this.tests=[],this._sts.get({query:"lesson="+this.lesson._id},{name:"public"}).subscribe(l=>{this.tests=l,this.testsIds=l.map(n=>n._id)})}};s.\u0275fac=function(n){return new(n||s)(d(ee),d(ne),d(B),d(ie),d(te),d(O),d(D),d(R),d(N))},s.\u0275cmp=w({type:s,selectors:[["ng-component"]],standalone:!1,decls:33,vars:17,consts:[[1,"documents-wrapper"],[1,"documents-container"],[1,"documents-list"],[1,"documents-header"],[1,"documents-header-left"],[1,"documents-header-left__arrow",3,"click"],[1,"material-icons"],["routerLink","/profile",1,"documents-header-left__avatar"],["alt","",3,"src"],[1,"documents-header__title"],[1,"burger-wrap",3,"click"],[1,"burger"],[1,"documents-sidebar"],[1,"documents-sidebar__close",3,"click"],[1,"documents-sidebar-content"],[1,"documents-sidebar__img"],[1,"documents-sidebar__title"],[1,"documents-sidebar__description"],[3,"select","items","modelChange",4,"ngIf"],[3,"click",4,"ngIf"],[1,"documents-main"],[1,"documents-main-content"],[3,"lessons","course","selectLesson",4,"ngIf"],[3,"certificate","lesson","tests","nextLesson",4,"ngIf"],[3,"sessionId","courseId","paid",4,"ngIf"],[3,"modelChange","select","items"],[3,"click"],["translate",""],[3,"selectLesson","lessons","course"],[3,"nextLesson","certificate","lesson","tests"],[3,"paid","sessionId","courseId"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),m("click",function(){return i.back()}),o(6,"span",6),a(7,"arrow_back_ios"),r()(),o(8,"div",7),x(9,"img",8),r()(),o(10,"div",9),a(11),r(),o(12,"div",10),m("click",function(){return i.isMenuOpen=!i.isMenuOpen}),x(13,"div",11),r()(),o(14,"div",12)(15,"div",13),m("click",function(){return i.isMenuOpen=!i.isMenuOpen}),o(16,"span",6),a(17,"close"),r()(),o(18,"div",14)(19,"div",15),x(20,"img",8),r(),o(21,"div",16),a(22),r(),o(23,"div",17),a(24),r(),h(25,De,1,2,"wselect",18)(26,Be,3,0,"wbutton",19)(27,je,3,0,"wbutton",19),r()(),o(28,"div",20)(29,"div",21),h(30,qe,1,2,"app-view",22)(31,ze,1,3,"app-lesson",23)(32,Ae,1,2,"app-buy",24),r()()()()()),n&2&&(L("documents-wrapper--open",i.isMenuOpen),c(9),u("src",i.userService.thumb,q),c(2),_(i.course.name),c(2),L("burger--close",i.isMenuOpen),c(),L("documents-sidebar--open",i.isMenuOpen),c(6),u("src",i.url+i.course.thumb,q),c(2),_(i.course.name),c(2),T(" ",i.course.description," "),c(),u("ngIf",i.lesson&&i.show==="lesson"),c(),u("ngIf",i.certificate&&i.show!=="lesson"),c(),u("ngIf",!i.certificate),c(3),u("ngIf",i.show==="view"),c(),u("ngIf",i.show==="lesson"&&i.lesson&&i.certificate),c(),u("ngIf",i.show==="buy"))},dependencies:[U,b,X,I,S,oe,ce,ae],encapsulation:2});let e=s;return e})();var $e=[{path:":course_id",component:A},{path:":course_id/:session_id",component:A}],Ct=(()=>{let s=class s{};s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=H({type:s}),s.\u0275inj=$({imports:[G.forChild($e),Z]});let e=s;return e})();export{Ct as CourseModule};
